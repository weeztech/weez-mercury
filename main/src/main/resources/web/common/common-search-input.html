<link rel="import" href="../bower_components/core-icons/core-icons.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">

<polymer-element name="common-search-input">
  <template>
    <style>
      :host {
        display: inline-block;
      }
    </style>
    <div horizontal layout center>
      <paper-icon-button icon="search" on-tap="{{searchAction}}"></paper-icon-button>
      <paper-input flex label="{{label}}" value="{{inputValue}}"></paper-input>
      <paper-icon-button icon="clear" on-tap="{{clearAction}}" hidden?="{{!inputValue}}"></paper-icon-button>
    </div>
  </template>
  <script>
    Polymer({
      publish: {
        value: '',
        delay: 500,
        label: '请输入关键字'
      },
      inputValue: '',
      inputValueChanged: function () {
        this.job('input', function () {
          this.value = this.inputValue;
        }, this.delay);
      },
      searchAction: function () {
        this.job('input', function () {
          this.value = this.inputValue;
        }, 0);
      },
      clearAction: function () {
        this.inputValue = '';
      }
    });
  </script>
</polymer-element>